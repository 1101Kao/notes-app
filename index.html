<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<title>Notes</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    }
  }

  /* ===== モバイルでカテゴリ操作ボタンを大きく ===== */
  @media screen and (max-width:600px) {
    .sidebar .edit-btn,
    .sidebar .del-btn {
      font-size:20px;
      padding:1px;
    }
  }

  /* ===== モバイルレイアウト調整 ===== */
  @media screen and (max-width:600px) {
    .sidebar {
      position: fixed;
      left: -100%;
      top: 0; bottom: 0;
      width: 80%; max-width: 280px;
      background: #fff;
      transition: left 0.3s ease;
      z-index: 2500;
      box-shadow: 2px 0 8px rgba(0,0,0,.2);
    }
    .sidebar.show { left: 0; }

    .menu-toggle {
      display:inline-block;
      font-size:30px;
      margin-right:10px;
      cursor:pointer;
    }

    .note {
      border: none;
      border-bottom: 1px solid #ddd;
      border-radius: 0;
      padding: 12px;
      box-shadow: none;
      background: transparent;
    }
    .note h3 { font-size: 16px; margin: 0 0 4px; font-weight: bold; }
    .note small { display: block; color: #888; margin-bottom: 4px; }
    .note p {
      font-size: 13px; color:#444; margin:0;
      white-space:pre-wrap; /* ← 修正済み */
      overflow:hidden; text-overflow:ellipsis;
    }

    /* ===== モバイル新規ボタン ===== */
    .fab {
      position: fixed;
      bottom: 16px; right: 16px;
      width: 56px; height: 56px;
      border-radius: 50%; border: none;
      background: #2a3a50; color: #fff;
      font-size: 28px; font-weight: bold;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      cursor: pointer; transition: background 0.3s;
      z-index: 3000;
    }
    .fab:hover { background: #a90e2; }
  }

  /* ===== はみ出し防止 ===== */
  .note, .mobile-editor, .editor-content,
  input, textarea, select {
    box-sizing: border-box;
    max-width: 100%;
  }
</style>
</head>
<body class="light">
<!-- ===== Topbar ===== -->
<div class="topbar">
  <div class="topbar-inner">
    <div class="topbar-title">
  <span class="menu-toggle" onclick="toggleCats()">≡</span>Notes
</div>
    <div class="topbar-actions">
      <button class="btn" onclick="toggleInfo()">info</button>
      <button class="btn" onclick="toggleTheme()">tm</button>
      <button class="btn" onclick="exportNotes()">ex</button>
      <input type="file" id="importFile" style="display:none" onchange="importNotes(event)">
      <button class="btn" onclick="document.getElementById('importFile').click()">in</button>
      <button class="btn btn-danger" onclick="deleteSelected()">del</button>
      <button class="btn btn-primary" onclick="openEditor(null); debugCheck()">＋</button>
    </div>
  </div>
</div>

<!-- 情報＆検索 -->
<div id="infoPanel">「＋」でノート作成できます。チェックをつけて「del」で一括削除できます。</div>
<div id="filterPanel"><input type="text" id="q" placeholder="検索したいワード" onkeyup="render()"></div>

<!-- ===== 2カラム ===== -->
<div class="container">
  <div class="sidebar">
    <h4>カテゴリ</h4>
    <ul id="catList"></ul>
    <div class="cat-input">
      <input type="text" id="newCat" placeholder="新しいカテゴリ">
      <button onclick="addCategory()">＋</button>
    </div>
  </div>
  <div class="main">
    <div id="list"></div>
  </div>
</div>

<!-- ===== PC用モーダル ===== -->
<div id="dlg">
  <div id="dlgHeader">ノート編集</div>
  <div class="content">
    <input type="date" id="fDate">
    <select id="fCat"></select>
    <input type="text" id="fTitle" placeholder="タイトル">
    <textarea id="fNotes" placeholder="本文" rows="6"></textarea>
    <div class="modal-footer">
      <button class="btn btn-danger" onclick="deleteNote()">削除</button>
      <button class="btn btn-cancel" onclick="closeEditor()">キャンセル</button>
      <button class="btn btn-primary" onclick="saveNote()">保存</button>
    </div>
  </div>
</div>

<!-- ===== モバイル用エディタ ===== -->
<div class="mobile-editor" id="mobileEditor">
  <div class="editor-header">
    <span>ノート編集</span>
    <button onclick="closeMobileEditor()">閉じる</button>
  </div>
  <div class="editor-content">
    <input type="date" id="mDate">
    <select id="mCat"></select>
    <input type="text" id="mTitle" placeholder="タイトル">
    <textarea id="mNotes" placeholder="本文" rows="8"></textarea>

    <!-- 保存ボタンをここに追加 -->
    <button class="btn btn-primary" onclick="saveMobileNote()">保存</button>
  </div>
</div>

<!-- モバイル新規ボタン -->
<button class="fab" onclick="onFabClick()">＋</button>

<!-- ===== サイドバーしまう用 ===== -->
<div id="sidebarOverlay" class="sidebar-overlay" onclick="toggleCats()"></div>
 
  <!-- JS 読み込み -->
  <script src="script.js"></script>
  
</body>
</html>
